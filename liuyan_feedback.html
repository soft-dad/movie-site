<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ„è§åé¦ˆ - é¾™è…¾ç”µå½±</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/common.css">
    <style>
        body{background:#f5f7fa;padding-top:100px}
        .fb-wrap{max-width:700px;margin:0 auto;background:#fff;border-radius:12px;box-shadow:0 4px 18px rgba(0,0,0,.08);padding:40px}
        .fb-wrap h2{color:#042A8F;margin-bottom:25px;font-size:24px}
        .fb-form{display:flex;flex-direction:gap:20px}
        .fb-form textarea{width:100%;height:120px;border:1px solid #d8d8d8;border-radius:6px;padding:10px;font-size:14px;resize:vertical}
        .fb-form input[type=text]{width:100%;padding:10px;border:1px solid #d8d8d8;border-radius:6px;margin-bottom:15px}
        .fb-form button{background:#042A8F;color:#fff;border:none;padding:10px 24px;border-radius:4px;cursor:pointer;font-size:15px}
        .fb-form button:hover{background:#0648c4}
        .footer{margin-top:60px}
    </style>
</head>
<body class="day">

<!-- éŸ³é¢‘ -->
<audio id="backgroundMusic" loop><source src="music/background_music.mp3" type="audio/mpeg"></audio>
<audio id="clickSound" preload="auto"><source src="music/click.mp3" type="audio/mpeg"></audio>
<button id="musicToggle" style="position:fixed;top:100px;right:20px;z-index:1000;padding:10px;cursor:pointer;background:rgba(0,0,0,.5);color:#fff;border:none;border-radius:5px;">ğŸ”Š æ’­æ”¾éŸ³ä¹</button>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const music = document.getElementById('backgroundMusic');
        const toggleButton = document.getElementById('musicToggle');
        const clickSound = document.getElementById('clickSound');
        const SOUND_MIN_DURATION = 200;

        // ç®€åŒ–çš„éŸ³é¢‘æ£€æŸ¥å‡½æ•°
        function checkAudioAvailability() {
            // æ£€æŸ¥èƒŒæ™¯éŸ³ä¹
            if (music.error) {
                console.error('èƒŒæ™¯éŸ³ä¹é”™è¯¯:', music.error);
                toggleButton.textContent = 'ğŸ”Š éŸ³ä¹æ–‡ä»¶é”™è¯¯';
            }

            // æ£€æŸ¥ç‚¹å‡»éŸ³æ•ˆ
            if (clickSound.error) {
                console.error('ç‚¹å‡»éŸ³æ•ˆé”™è¯¯:', clickSound.error);
            }
        }

        // æ’­æ”¾ç‚¹å‡»éŸ³æ•ˆçš„ç®€åŒ–ç‰ˆæœ¬
        function playClickSound() {
            return new Promise(resolve => {
                // æ— è®ºå¦‚ä½•éƒ½åœ¨æœ€çŸ­æ—¶é—´åresolveï¼Œç¡®ä¿äº¤äº’ä¸å¡é¡¿
                setTimeout(resolve, SOUND_MIN_DURATION);

                // å°è¯•æ’­æ”¾éŸ³æ•ˆ
                if (clickSound && clickSound.readyState >= 2) {
                    clickSound.currentTime = 0;
                    clickSound.play().catch(e => console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:', e));
                }
            });
        }

        // èƒŒæ™¯éŸ³ä¹æ§åˆ¶
        toggleButton.addEventListener('click', function() {
            // å…ˆæ’­æ”¾ç‚¹å‡»éŸ³æ•ˆï¼Œå†åˆ‡æ¢èƒŒæ™¯éŸ³ä¹çŠ¶æ€
            playClickSound().then(() => {
                if (music.paused) {
                    music.play()
                        .then(() => toggleButton.textContent = 'ğŸ”‡ å…³é—­éŸ³ä¹')
                        .catch(e => {
                            console.log('éŸ³ä¹æ’­æ”¾å¤±è´¥:', e);
                            alert('éŸ³ä¹æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨');
                        });
                } else {
                    music.pause();
                    toggleButton.textContent = 'ğŸ”Š æ’­æ”¾éŸ³ä¹';
                }
            });
        });

        // ä¸ºæ‰€æœ‰å¯ç‚¹å‡»å…ƒç´ æ·»åŠ éŸ³æ•ˆ
        document.querySelectorAll('a, button, input[type="button"], input[type="submit"]').forEach(element => {
            // æ’é™¤éŸ³ä¹æŒ‰é’®ï¼Œå› ä¸ºå·²ç»å•ç‹¬å¤„ç†
            if (element.id !== 'musicToggle') {
                element.addEventListener('click', function(e) {
                    // å¯¹é“¾æ¥ç‰¹æ®Šå¤„ç†ï¼Œé˜²æ­¢ç«‹å³è·³è½¬
                    if (this.tagName === 'A' && this.href && !this.href.includes('#')) {
                        e.preventDefault();
                        const href = this.href;
                        const target = this.target;

                        playClickSound().then(() => {
                            if (target === '_blank') {
                                window.open(href, '_blank');
                            } else {
                                window.location.href = href;
                            }
                        });
                    } else {
                        // æ™®é€šæŒ‰é’®åªæ’­æ”¾éŸ³æ•ˆ
                        playClickSound();
                    }
                });
            }
        });

        // åˆå§‹åŒ–ä¸‹æ‹‰èœå•ï¼ˆä¿ç•™åŸæœ‰åŠŸèƒ½ï¼‰
        function initDropdownMenus() {
            const dropdowns = document.querySelectorAll('.dropdown');

            dropdowns.forEach(dropdown => {
                const dropbtn = dropdown.querySelector('.dropbtn');
                const dropdownContent = dropdown.querySelector('.dropdown-content');

                if (dropbtn && dropdownContent) {
                    const dropdownItems = dropdownContent.querySelectorAll('a');
                    dropdownItems.forEach(item => {
                        item.addEventListener('click', function(e) {
                            e.stopPropagation();
                            const href = this.getAttribute('href');
                            playClickSound().then(() => {
                                window.location.href = href;
                            });
                        });
                    });

                    if (window.innerWidth < 768) {
                        dropbtn.addEventListener('click', function(e) {
                            e.preventDefault();
                            dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
                        });
                    }

                    document.addEventListener('click', function(e) {
                        if (!dropdown.contains(e.target)) {
                            dropdownContent.style.display = 'none';
                        }
                    });
                }
            });
        }

        // æœç´¢æŒ‰é’®å¤„ç†
        const searchSubmit = document.querySelector('.serch-form .submit');
        if (searchSubmit) {
            searchSubmit.addEventListener('click', function(e) {
                const input = document.querySelector('.serch-form .search');
                if (!input.value.trim()) {
                    e.preventDefault();
                    alert('è¯·è¾“å…¥æœç´¢å†…å®¹');
                }
            });
        }

        // åˆ‡æ¢èƒŒæ™¯æŒ‰é’®å¤„ç†
        const changeBgBtn = document.querySelector('#tool .c4');
        if (changeBgBtn) {
            changeBgBtn.addEventListener('click', function() {
                playClickSound().then(() => {
                    if (typeof changeBg === 'function') {
                        changeBg();
                    } else {
                        document.body.classList.toggle('day');
                        document.body.classList.toggle('night');
                    }
                });
            });
        }

        // åˆå§‹åŒ–
        checkAudioAvailability();
        initDropdownMenus();
    });
    document.addEventListener('DOMContentLoaded', function () {
        const tabs = document.querySelectorAll('.tab');
        const contents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', function (e) {
                e.preventDefault(); // é˜»æ­¢é»˜è®¤è·³è½¬

                const target = this.dataset.target;

                // åˆ‡æ¢æ ‡ç­¾æ ·å¼
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                // åˆ‡æ¢å†…å®¹æ˜¾ç¤º
                contents.forEach(c => c.classList.remove('active'));
                const targetContent = document.getElementById(target);
                if (targetContent) {
                    targetContent.classList.add('active');
                }
            });
        });
    });

</script>
<nav class="header">
<div class="contain">
        <a href="./index.html" class="logo"></a>
        <ul>
            <li><a href="./index.html">é¦–é¡µ</a></li>
            <li class="dropdown">
                <a href="./movie.html" class="dropbtn">ç”µå½±</a>
                <div class="dropdown-content">
                    <a href="category_Action.html">åŠ¨ä½œç‰‡</a>
                    <a href="category_Comedy.html">å–œå‰§ç‰‡</a>
                    <a href="category_Romance.html">çˆ±æƒ…ç‰‡</a>
                    <a href="category_Sci-fic.html">ç§‘å¹»ç‰‡</a>
                </div>
            </li>
            <li><a href="./cinema.html">å½±é™¢</a></li>
            <li class="dropdown">
                <a href="./liuyan.html" class="dropbtn">åé¦ˆ</a>
                <div class="dropdown-content">
                    <a href="liuyan_tel.html">ç”µè¯å®¢æœ</a>
                    <a href="liuyan.html">ç³»ç»Ÿç•™è¨€</a>
                    <a href="liuyan_feedback.html">æ„è§åé¦ˆ</a>
                    <a href="liuyan_about.html">å…³äºæˆ‘ä»¬</a>
                </div>
            </li>
            <li><a href="./mall.html">å•†åŸ</a></li>
        </ul>
        <div class="userinfo">
            <img src="./img/userifo.png" alt="ç”¨æˆ·">
            <a href="./login.html" style="margin-left: 20px;">ç™»å½•</a>
        </div>
        <form action="#" class="serch-form" method="POST">
            <input type="search" class="search" placeholder="æ‰¾å½±è§†å‰§ å½±äºº å½±é™¢">
            <input type="submit" class="submit" value="">
        </form>
        <div class="appdownload">
            <a href="#">
                <span class="iphone-icon"></span>
                <span class="apptext">appä¸‹è½½</span>
                <span class="caret"></span>
                <div class="downloadicon">
                    <p class="down-title">æ‰«ç ä¸‹è½½app</p>
                    <p class="down-content">é€‰åº§æ›´ä¼˜æƒ </p>
                </div>
            </a>
        </div>
    </div>
</nav>

<div class="fb-wrap">
    <h2>æ„è§åé¦ˆ</h2>
    <form class="fb-form" onsubmit="submitFeedback(event)">
        <input type="text" id="contact" placeholder="æ‚¨çš„é‚®ç®±/æ‰‹æœºå·ï¼ˆé€‰å¡«ï¼‰">
        <textarea id="content" required placeholder="è¯·è¯¦ç»†æè¿°æ‚¨çš„æ„è§æˆ–é‡åˆ°çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šå°½å¿«å¤„ç†ï½"></textarea>
        <button type="submit">æäº¤åé¦ˆ</button>
    </form>
</div>

<div class="footer">â€¦</div>

<script>
function submitFeedback(e){
    e.preventDefault();
    const contact=document.getElementById('contact').value.trim();
    const content=document.getElementById('content').value.trim();
    if(!content){alert('å†…å®¹ä¸èƒ½ä¸ºç©º');return}
    // è¿™é‡Œå¯æ¥å…¥åç«¯æ¥å£
    alert('æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼æˆ‘ä»¬å·²æ”¶åˆ°å¹¶ä¼šå°½å¿«å¤„ç†ã€‚');
    e.target.reset();
}
</script>
</body>
</html>